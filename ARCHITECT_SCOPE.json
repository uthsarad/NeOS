{
  "deliverable": "Installer & Update Hardening",
  "files": [
    "airootfs/usr/local/bin/neos-autoupdate.sh",
    "pacman.conf",
    "airootfs/etc/pacman.conf"
  ],
  "tasks": [
    {
      "file": "airootfs/usr/local/bin/neos-autoupdate.sh",
      "action": "Implement strict disk space checks",
      "details": "Add a check to ensure there is sufficient free space (e.g., at least 5GB or 10%) on the root filesystem before attempting to create a Btrfs pre-snapshot and running pacman. This mitigates the risk of failing mid-update and breaking rollback capability."
    },
    {
      "file": "pacman.conf",
      "action": "Address unsigned package risk",
      "details": "Investigate and document the feasibility of removing `SigLevel = Optional` for the alci_repo. If it cannot be removed, ensure it is clearly scoped and not inherited globally. The root `pacman.conf` should continue to use `SigLevel = Required DatabaseOptional` for the build process."
    },
    {
      "file": "airootfs/etc/pacman.conf",
      "action": "Verify installed system security",
      "details": "Ensure the system-level pacman configuration used on the installed system enforces `SigLevel = Required DatabaseRequired` to prevent supply chain attacks post-installation."
    }
  ],
  "constraints": [
    "Do not introduce new features to the update script; only hardening measures.",
    "Changes to pacman.conf must not break the `build.sh` process.",
    "Do not alter the Btrfs subvolume layout or snapshot logic itself."
  ]
}
