You are a senior Arch Linux developer. Output ONLY code blocks with file paths. No explanations unless critical.

pkgbase=linux-neos
pkgname=('linux-neos' 'linux-neos-headers')
_kernelname=${pkgbase#linux}
_kernelname=${_kernelname:+-${_kernelname}}

# Set pkgver and src version here. This is updated by update.sh
_kernelver=6.19
_kernelrel=1

# Update these to match the version of the zen kernel
_kernver="${_kernelver}-${_kernelrel}-zen${_kernelname}"
_zentag="v${_kernelver}-zen${_kernelrel}"

pkgver=${_kernver/-/_}

arch=('x86_64')
url="https://www.kernel.org/"
license=('GPL2')

makedepends=('xmlto' 'asciidoc' 'docbook-xsl' 'gperf' 'python-sphinx'
             'graphviz' 'imagemagick' 'pahole' 'libelf' 'zstd' 'xz' 'bc'
             'gcc>=7.3' 'binutils>=2.30' 'openssl' 'libelf' 'libdw'
             'libarchive' 'libudev' 'libseccomp' 'zstd' 'llvm' 'clang'
             'lld' 'python-sphinx' 'python-sphinx_rtd_theme' 'graphviz'
             'pahole' 'rust' 'rust-bindgen' 'python-myst-parser')

options=('!strip' '!debug' 'docs')
source=("https://www.kernel.org/pub/linux/kernel/v6.x/linux-${_kernelver}.tar.xz"{,.sig}
        "https://github.com/zen-kernel/zen-kernel/archive/${_zentag}.tar.gz"{,.sig}
        # Config
        "config.x86_64::https://raw.githubusercontent.com/archlinux/svntogit-packages/packages/linux/trunk/config"
        
        # Patches
        "https://github.com/zen-kernel/zen-kernel/commit/4c5e6f71069d7743e7720df993b6a0083991e440.patch"  # Zen patchset
        "https://github.com/zen-kernel/zen-kernel/commit/3b9be2ca15789a295592a1a74c137e97083086db.patch"  # Additional zen patches
        
        # Custom patches for NeOS
        "neos-btrfs-built-in.patch"
        "neos-security-hardening.patch"
        "neos-scheduler-optimizations.patch")
sha256sums=('SKIP'  # Verified by signature
            'SKIP'  # Verified by signature
            'SKIP'  # Verified by signature
            'SKIP'  # Verified by signature
            'SKIP'  # Config
            'SKIP'  # Zen patch 1
            'SKIP'  # Zen patch 2
            'SKIP'  # NeOS Btrfs patch
            'SKIP'  # NeOS security patch
            'SKIP') # NeOS scheduler patch
validpgpkeys=('ABAF11C65A2970B130ABE3C479BE3E4300411886'  # Greg Kroah-Hartman
              '647F28654894E3BD457199BE38DBBDC8421AA1F7'  # Jan Alexander Steffens (heftig)
              'E65B3554B6B32B32A107BA9B433A79486DEB706E') # Luke Jones

prepare() {
  cd "${srcdir}/linux-${_kernelver}"
  
  # Extract zen kernel patches
  tar -xaf "${srcdir}/${_zentag}.tar.gz" --strip-components=1
  
  # Apply custom NeOS patches
  patch -Np1 -i "${srcdir}/neos-btrfs-built-in.patch"
  patch -Np1 -i "${srcdir}/neos-security-hardening.patch"
  patch -Np1 -i "${srcdir}/neos-scheduler-optimizations.patch"
  
  # Copy config
  cp "${srcdir}/config.x86_64" ./.config
  
  # Prepare configuration
  make -j1 olddefconfig
  # Apply additional config changes
  scripts/kconfig/merge_config.sh -m .config "${srcdir}/extraconfig.cfg"
}

build() {
  cd "${srcdir}/linux-${_kernelver}"
  
  # Create extra config file for NeOS-specific settings
  cat > "${srcdir}/extraconfig.cfg" << EOF
# NeOS-specific kernel configurations
CONFIG_BTRFS_FS=y
CONFIG_BTRFS_FS_POSIX_ACL=y
CONFIG_SECURITY_LOCKDOWN_LSM=y
CONFIG_SECURITY_LOCKDOWN_LSM_EARLY=y
CONFIG_STATIC_USERMODEHELPER=y
CONFIG_STATIC_USERMODEHELPER_INODE=y
EOF

  make -j$(nproc) EXTRAVERSION="${_kernelname}" LOCALVERSION=
}

package_linux-neos() {
  pkgdesc="The Linux-NeOS Kernel and modules"
  depends=('coreutils' 'kmod' 'initramfs' "linux-neos-headers=${pkgver}")
  optdepends=('crda: to set the correct wireless channels of your country'
              'linux-firmware: firmware for Linux'
              'initramfs: default initramfs generation')

  cd "${srcdir}/linux-${_kernelver}"
  
  # Install kernel
  install -Dt "${pkgdir}/boot" -m644 arch/x86/boot/bzImage
  mv "${pkgdir}/boot/bzImage" "${pkgdir}/boot/vmlinuz-linux-neos"
  
  # Install modules
  make INSTALL_MOD_PATH="${pkgdir}" modules_install
  # Remove build metadata
  find "${pkgdir}" -name '.install' -o -name '.packlist' -o -name 'modules.tags' | xargs rm -v
  # Remove broken symlinks
  find "${pkgdir}" -name '*.*' -type l | xargs -r ls -la | grep 'broken\|No such' | awk '{print $9}' | xargs -r rm -v
  
  # Install documentation
  install -dm755 "${pkgdir}/usr/share/doc"
  ln -sf linux "${pkgdir}/usr/share/doc/linux-neos"
}

package_linux-neos-headers() {
  pkgdesc="Headers and scripts for building modules against the NeOS kernel"
  provides=("linux-headers=${pkgver}")
  conflicts=('linux-headers')
  
  cd "${srcdir}/linux-${_kernelver}"
  
  # Install headers
  make INSTALL_HDR_PATH="${pkgdir}/usr" headers_install
  install -Dt "${pkgdir}/usr/lib/modules/${_kernver}${_kernelname}" -m644 Module.symvers
  
  # Install scripts
  local _scripts=(
    arch/x86/include/
    drivers/md/dm-ioctl.h
    include/
    scripts/
    usr/include/
    Makefile
    .config
    modules.order
    Module.symvers
  )
  install -dm755 "${pkgdir}"/usr/src/linux-${_kernver}${_kernelname}
  for _script in "${_scripts[@]}"; do
    cp -at "${pkgdir}"/usr/src/linux-${_kernver}${_kernelname} -d "$_script"
  done
  ln -st linux-${_kernver}${_kernelname} "${pkgdir}/usr/src/linux"
  
  # Remove docs to save space
  find "${pkgdir}/usr/src/linux-${_kernver}${_kernelname}"/{Documentation,arch/*/Documentation} -delete
  find "${pkgdir}/usr/src/linux-${_kernver}${_kernelname}" -name 'Kconfig*' -delete
  find "${pkgdir}/usr/src/linux-${_kernver}${_kernelname}" -name '*.txt' -not -path '*/include/*' -delete
  find "${pkgdir}/usr/src/linux-${_kernver}${_kernelname}" -name '*.rst' -not -path '*/include/*' -delete
  find "${pkgdir}/usr/src/linux-${_kernver}${_kernelname}" -name '*.html' -not -path '*/include/*' -delete
  find "${pkgdir}/usr/src/linux-${_kernver}${_kernelname}" -name '*.sh' -executable -exec strip --strip-debug {} \;
}